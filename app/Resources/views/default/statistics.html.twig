{% extends 'base.html.twig' %}
{% block title %}Statistiques{% endblock %}

{% block body %}
    {% include 'default/navbar.html.twig' %}
    {% set scores = countScore %}
    <h4>Statistiques des diff√©rents restaurants</h4>
    <div class="col-md-6" id="scoreStats" data-scores="{{ scores|join(', ') }}">
        <div id="chart_div" style="width: 900px; height: 500px;"></div>
    </div>
    <div id="gradeStats" class="col-md-6" data-grade-A="{{ countGrade["count A"] }}" data-grade-B="{{ countGrade["count B"] }}" data-grade-C="{{ countGrade["count C"] }}">
        <div id="piechart" style="width: 900px; height: 500px;"></div>
    </div>


    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load("current", {packages:["corechart"]});
        google.charts.setOnLoadCallback(drawChart);
        google.charts.setOnLoadCallback(drawChart2);

        //Pie chart
        function drawChart() {
            var gradeStats = $('#gradeStats');
            var data = google.visualization.arrayToDataTable([
                ['Task', 'Hours per Day'],
                ['Grade A',     gradeStats.data("grade-a")],
                ['Grade B',      gradeStats.data("grade-b")],
                ['Grade C',  gradeStats.data("grade-c")]
            ]);
            var options = {
                title: 'Le nombre de restaurants par grade'
            };
            var chart = new google.visualization.PieChart(document.getElementById('piechart'));
            chart.draw(data, options);
        }

        //Histo Chart
        function drawChart2() {

            var scoreData = $('#scoreStats').data("scores");
            console.log(scoreData);

            var data2 = google.visualization.arrayToDataTable([
                ['Dinosaur', 'Length'],
                ['Acrocanthosaurus (top-spined lizard)', 12.2],
                ['Albertosaurus (Alberta lizard)', 9.1],
                ['Allosaurus (other lizard)', 12.2],
                ['Apatosaurus (deceptive lizard)', 22.9],
                ['Archaeopteryx (ancient wing)', 0.9],
                ['Argentinosaurus (Argentina lizard)', 36.6],
                ['Baryonyx (heavy claws)', 9.1],
                ['Brachiosaurus (arm lizard)', 30.5],
                ['Ceratosaurus (horned lizard)', 6.1],
                ['Coelophysis (hollow form)', 2.7],
                ['Compsognathus (elegant jaw)', 0.9],
                ['Deinonychus (terrible claw)', 2.7],
                ['Diplodocus (double beam)', 27.1],
                ['Dromicelomimus (emu mimic)', 3.4],
                ['Gallimimus (fowl mimic)', 5.5],
                ['Mamenchisaurus (Mamenchi lizard)', 21.0],
                ['Megalosaurus (big lizard)', 7.9],
                ['Microvenator (small hunter)', 1.2],
                ['Ornithomimus (bird mimic)', 4.6],
                ['Oviraptor (egg robber)', 1.5],
                ['Plateosaurus (flat lizard)', 7.9],
                ['Sauronithoides (narrow-clawed lizard)', 2.0],
                ['Seismosaurus (tremor lizard)', 45.7],
                ['Spinosaurus (spiny lizard)', 12.2],
                ['Supersaurus (super lizard)', 30.5],
                ['Tyrannosaurus (tyrant lizard)', 15.2],
                ['Ultrasaurus (ultra lizard)', 30.5],
                ['Velociraptor (swift robber)', 1.8]]);
            var options2 = {
                title: 'Scores des meilleurs restaurants',
                legend: { position: 'none' },
                colors: ['#e7711c'],
                histogram: { lastBucketPercentile: 5 },
                vAxis: { scaleType: 'mirrorLog' }
            };
            var chart2 = new google.visualization.Histogram(document.getElementById('chart_div'));
            chart2.draw(data2, options2);
        }
    </script>

{% endblock %}

